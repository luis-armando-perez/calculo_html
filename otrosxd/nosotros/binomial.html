<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distribución Binomial</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-lg p-6 max-w-md mx-4 relative">
            <button onclick="closeModal()" class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 text-xl font-bold">×</button>
            <h3 class="text-lg font-semibold mb-4">Conceptos y Fórmulas</h3>
            <div class="space-y-3 text-sm">
                <p><strong>Concepto:</strong> Distribución binomial de una variable aleatoria discreta.</p>
                <div>
                    <p><strong>Fórmulas:</strong></p>
                    <ul class="mt-2 space-y-1 ml-4">
                        <li>Probabilidad: P(X=x) = C(n,x) p^x (1-p)^(n-x)</li>
                        <li>Media (μ): μ = n·p</li>
                        <li>Varianza (σ²): σ² = n·p·(1-p)</li>
                        <li>Desviación estándar (σ): σ = √(n·p·(1-p))</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Card -->
    <div class="bg-white rounded-lg shadow-lg p-6 w-full max-w-md relative">
        <!-- Info Button -->
        <button onclick="openModal()" class="absolute top-4 right-4 w-6 h-6 bg-blue-500 text-white rounded-full text-xs font-bold hover:bg-blue-600 transition-colors">
            i
        </button>

        <!-- Title -->
        <h1 class="text-xl font-bold text-gray-800 mb-6 pr-8">Distribución Binomial — Lanzamiento de moneda</h1>

        <!-- Inputs -->
        <div class="space-y-4 mb-6">
            <div>
                <label for="n" class="block text-sm font-medium text-gray-700 mb-1">n = número de lanzamientos</label>
                <input type="number" id="n" value="10" min="1" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div>
                <label for="x" class="block text-sm font-medium text-gray-700 mb-1">x = número de éxitos</label>
                <input type="number" id="x" value="3" min="0" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            <div>
                <label for="p" class="block text-sm font-medium text-gray-700 mb-1">p = probabilidad de éxito</label>
                <input type="number" id="p" value="0.5" min="0" max="1" step="0.01" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>
        </div>

        <!-- Calculate Button -->
        <button onclick="calculate()" class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 transition-colors font-medium">
            Calcular
        </button>

        <!-- Results -->
        <div id="results" class="mt-6 space-y-2 text-sm"></div>
    </div>

    <script>
        function openModal() {
            document.getElementById('modal').classList.remove('hidden');
            document.getElementById('modal').classList.add('flex');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
            document.getElementById('modal').classList.remove('flex');
        }

        function factorial(n) {
            if (n <= 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        function combination(n, x) {
            return factorial(n) / (factorial(x) * factorial(n - x));
        }

        function calculate() {
            const n = parseInt(document.getElementById('n').value);
            const x = parseInt(document.getElementById('x').value);
            const p = parseFloat(document.getElementById('p').value);
            const resultsDiv = document.getElementById('results');

            if (isNaN(n) || isNaN(x) || isNaN(p) || n < 1 || x < 0 || x > n || p < 0 || p > 1) {
                resultsDiv.innerHTML = '<p class="text-red-500">Por favor, ingresa valores válidos.</p>';
                return;
            }

            //calcular probabilidad binomial
            const probability = combination(n, x) * Math.pow(p, x) * Math.pow(1 - p, n - x);
            const percentage = (probability * 100).toFixed(2);

            //estadísticas
            const mean = n * p;
            const variance = n * p * (1 - p);
            const standardDeviation = Math.sqrt(variance);

            //resultados
            resultsDiv.innerHTML = `
                <div class="bg-gray-50 p-4 rounded-md">
                    <p><strong>P(X = ${x}):</strong> ${probability.toFixed(7)} (${percentage}%)</p>
                    <p><strong>Media (μ):</strong> ${mean.toFixed(3)}</p>
                    <p><strong>Varianza (σ²):</strong> ${variance.toFixed(3)}</p>
                    <p><strong>Desviación estándar (σ):</strong> ${standardDeviation.toFixed(3)}</p>
                </div>
            `;
        }

        //cerrar modal al hacer clic fuera de él
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
